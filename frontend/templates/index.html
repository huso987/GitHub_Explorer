<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GitHub Explorer</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<div class="container">
    <header>
        <h1>üêô GitHub Explorer</h1>
        <div class="search-box">
            <input id="username" placeholder="GitHub username">
            <button onclick="loadData()">Search</button>
        </div>
    </header>

    <section id="profile" class="card hidden">
        <img id="avatar">
        <h2 id="name"></h2>
        <div class="stats">
            <span><strong id="followers"></strong> Followers</span>
            <span><strong id="following"></strong> Following</span>
            <span><strong id="repos"></strong> Repos</span>
        </div>
    </section>

    <section>
        <h3 id="repo-title" class="hidden">Repositories</h3>
        <div id="repo-list" class="repo-grid"></div>
    </section>
</div>

<script>
async function loadData() {
    const username = document.getElementById("username").value;

    const user = await fetch(`/api/users/${username}`).then(r => r.json());
    const repos = await fetch(`/api/repos/${username}`).then(r => r.json());

    // Profile
    document.getElementById("profile").classList.remove("hidden");
    document.getElementById("avatar").src = user.avatar_url;
    document.getElementById("name").innerText = user.username;
    document.getElementById("followers").innerText = user.followers;
    document.getElementById("following").innerText = user.following;
    document.getElementById("repos").innerText = user.public_repos;

    // Repos
    document.getElementById("repo-title").classList.remove("hidden");
    const list = document.getElementById("repo-list");
    list.innerHTML = "";

    repos.forEach(repo => {
        list.innerHTML += `
            <div class="repo-card">
                <h4>${repo.name}</h4>
                <p>${repo.language || "Unknown"}</p>
                <span>‚≠ê ${repo.stars}</span>
                <a href="${repo.url}" target="_blank">View</a>
            </div>
        `;
    });
}
</script>

</body>
</html>
